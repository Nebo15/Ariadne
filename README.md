# Ariadne
Сервис для гео данных БЭСТ

## Текущая актуальная версия API
1
## Общие положения
Данное API подразумевает поддержку одной актуальной версии API, которая передаётся в URL запроса.

Формат ответа, который ожидает получить клиент можно передавать как расширение. Поддерживаемые форматы ответа: `json,xml,csv`
На данный момент возвращаются следующие HTTP-коды ответов:
- `200` - запрос отработал успешно
- `404` - запрашиваемый элемент не найден
- `400` - переданы неверные параметры

Пример URL запроса:
```
GET /api/v1/destination_points/1033.json
```
- `destination_points` - интересующая сущность. Список доступных сущностей см. в разделе **Работа с API**
- `v1` - версия API,
- `1033` - идентификатор записи
- `json` - требуемый формат ответа. Далее в документации в примерах для понятности будет использоваться json-формат.

## Работа с API
### Точки (destination_points)

#### Поля с информацией о точке
- `id`- идентификатор точки
- `country_id` - идентификатор страны
- `city_id` - идентификатор города
- `system_id` - идентификатор платёжной системы
- `point_id` - идентификатор agent_point
- `name` - название точки
- `currencies` - список доступных валют, разделённых запятой
- `address` - читабельный адрес точки
- `address_crc` - контрольная сумма адреса?
- `is_published` - флаг активности точки
- `latitude` - широта точки
- `longitude` - долгота точки
- `geo_accuracy` - точность геопизиции: может принимать значение *address* или *city*
- `direction` - ?

#### Формат координат
API принимает широту и долготу, заданные в градусах. Максимальное количество десятичных знаков - 8, минимальное - 1. Значение может быть как положительным, но без знака `+`, так и отрицательным со знаком `-`
- Ограничения для широты: `-90.0 ~ 90.0`
- Ограничения для долготы: `-180,0 ~ 180.0`

#### Получение информации о точке
```
GET /api/vX/destination_points/{point_id}.json
```
- `point_id` - идентификатор точки. Принимаемые значения - 0 или целое положительное
##### Возможные результаты
###### Точка найдена
```json
{"id":"1033","country_id":"398","city_id":"2881","system_id":"19","point_id":"20365223","name":"\u0412\u041a \u041e\u0424 \u0410\u041e \"\u041a\u0430\u0437\u043f\u043e\u0447\u0442\u0430\"","currencies":"RUR,USD,EUR","address":"\u0423\u0441\u0442\u044c-\u041a\u0430\u043c\u0435\u043d\u043e\u0433\u043e\u0440\u0441,\u041e\u0441\u043a\u0435\u043c\u0435\u043d, \u0443\u043b.\u0411\u0435\u043b\u0438\u043d\u0441\u043a\u043e\u0433\u043e,\u0426\u041e\u041d","address_crc":"4025177933","is_published":"1","latitude":"49.97204400","longitude":"82.60011700","geo_accuracy":"address","direction":"in"}
```
###### Точка не найдена
```json
{"code":404,"message":"Destination Point with id=1033 not found"}
```
- `code` - дублирование HTTP-код результата
- `message` - сопроводительная информация к ошибке

#### Получение списка точек в городе
```
GET /api/vX/destination_points/city/{city_id}.json
```
- `city_id` - идентификатор города. Принимаемые значения - 0 или целое положительное
##### Возможные результаты
###### Список точек
```json
[{"id":"1033","country_id":"398","city_id":"2881","system_id":"19","point_id":"20365223","name":"\u0412\u041a \u041e\u0424 \u0410\u041e \"\u041a\u0430\u0437\u043f\u043e\u0447\u0442\u0430\"","currencies":"RUR,USD,EUR","address":"\u0423\u0441\u0442\u044c-\u041a\u0430\u043c\u0435\u043d\u043e\u0433\u043e\u0440\u0441,\u041e\u0441\u043a\u0435\u043c\u0435\u043d, \u0443\u043b.\u0411\u0435\u043b\u0438\u043d\u0441\u043a\u043e\u0433\u043e,\u0426\u041e\u041d","address_crc":"4025177933","is_published":"1","latitude":"49.97204400","longitude":"82.60011700","geo_accuracy":"address","direction":"in"},{"id":"37269","country_id":"398","city_id":"2881","system_id":"19","point_id":"20355414","name":"\u0426\u0411\u041e 93 \u0410\u041e \"\u0426\u0435\u0441\u043d\u0430\u0431\u0430\u043d\u043a\" \u0412\u041a\u0424","currencies":"RUR,USD,EUR","address":"\u0423\u0441\u0442\u044c-\u041a\u0430\u043c\u0435\u043d\u043e\u0433\u043e\u0440\u0441\u043a, \u0443\u043b. \u0410\u0443\u044d\u0437\u043e\u0432\u0430, 20","address_crc":"429448866","is_published":"1","latitude":"49.94875900","longitude":"82.62845900","geo_accuracy":"address","direction":"in"}]
```
###### Пустой список
```json
[]
```

#### Получение списка точек в прямоугольнике с заданными координатами
```
GET /api/vX/destination_points/coordinates.json?latlong1={latlong1}&latlong2={latlong2}&system_id={system_id}&city_id={city_id}
```
- `latlong1` - координаты левой верхней точки прямоугольника. См. **Формат координат**. Например, "48.93755299,82.5832109"
- `latlong2` - координаты нижней правой точки прямоугольника. См. **Формат координат**. Например, "50.93755301,82.69321101"
- `system_id` - (**не обязателен**) идентификатор платежной системы. Принимаемые значения - 0 или целое положительное. Например, 19.
- `city_id` - (**не обязателен**) идентификатор города. Принимаемые значения - 0 или целое положительное. Например, 2881.
###### Список точек
```json
[{"id":"1033","country_id":"398","city_id":"2881","system_id":"19","point_id":"20365223","name":"\u0412\u041a \u041e\u0424 \u0410\u041e \"\u041a\u0430\u0437\u043f\u043e\u0447\u0442\u0430\"","currencies":"RUR,USD,EUR","address":"\u0423\u0441\u0442\u044c-\u041a\u0430\u043c\u0435\u043d\u043e\u0433\u043e\u0440\u0441,\u041e\u0441\u043a\u0435\u043c\u0435\u043d, \u0443\u043b.\u0411\u0435\u043b\u0438\u043d\u0441\u043a\u043e\u0433\u043e,\u0426\u041e\u041d","address_crc":"4025177933","is_published":"1","latitude":"49.97204400","longitude":"82.60011700","geo_accuracy":"address","direction":"in"},{"id":"37269","country_id":"398","city_id":"2881","system_id":"19","point_id":"20355414","name":"\u0426\u0411\u041e 93 \u0410\u041e \"\u0426\u0435\u0441\u043d\u0430\u0431\u0430\u043d\u043a\" \u0412\u041a\u0424","currencies":"RUR,USD,EUR","address":"\u0423\u0441\u0442\u044c-\u041a\u0430\u043c\u0435\u043d\u043e\u0433\u043e\u0440\u0441\u043a, \u0443\u043b. \u0410\u0443\u044d\u0437\u043e\u0432\u0430, 20","address_crc":"429448866","is_published":"1","latitude":"49.94875900","longitude":"82.62845900","geo_accuracy":"address","direction":"in"}]
```
###### Пустой список
```json
[]
```
###### Переданны неверные параметры
```json
{"code":400,"message":"Bad request"}
```

#### Получение списка точек в заданном городе в прямоугольнике с заданными координатами
```
GET /api/vX/destination_points/city/{city_id}/coordinates.json?latlong1={latlong1}&latlong2={latlong2}&system_id={system_id}
```
- `city_id` - идентификатор города. Например, 2881.
- `latlong1` - координаты левой верхней точки прямоугольника. См. **Формат координат**. Например, "48.93755299,82.5832109"
- `latlong2` - координаты нижней правой точки прямоугольника. См. **Формат координат**. Например, "50.93755301,82.69321101"
- `system_id` - (**не обязателен**) идентификатор платежной системы. Например, 19.
###### Список точек
```json
[{"id":"1033","country_id":"398","city_id":"2881","system_id":"19","point_id":"20365223","name":"\u0412\u041a \u041e\u0424 \u0410\u041e \"\u041a\u0430\u0437\u043f\u043e\u0447\u0442\u0430\"","currencies":"RUR,USD,EUR","address":"\u0423\u0441\u0442\u044c-\u041a\u0430\u043c\u0435\u043d\u043e\u0433\u043e\u0440\u0441,\u041e\u0441\u043a\u0435\u043c\u0435\u043d, \u0443\u043b.\u0411\u0435\u043b\u0438\u043d\u0441\u043a\u043e\u0433\u043e,\u0426\u041e\u041d","address_crc":"4025177933","is_published":"1","latitude":"49.97204400","longitude":"82.60011700","geo_accuracy":"address","direction":"in"},{"id":"37269","country_id":"398","city_id":"2881","system_id":"19","point_id":"20355414","name":"\u0426\u0411\u041e 93 \u0410\u041e \"\u0426\u0435\u0441\u043d\u0430\u0431\u0430\u043d\u043a\" \u0412\u041a\u0424","currencies":"RUR,USD,EUR","address":"\u0423\u0441\u0442\u044c-\u041a\u0430\u043c\u0435\u043d\u043e\u0433\u043e\u0440\u0441\u043a, \u0443\u043b. \u0410\u0443\u044d\u0437\u043e\u0432\u0430, 20","address_crc":"429448866","is_published":"1","latitude":"49.94875900","longitude":"82.62845900","geo_accuracy":"address","direction":"in"}]
```
###### Пустой список
```json
[]
```
###### Переданны неверные параметры
```json
{"code":400,"message":"Bad request"}
```
### Установка


### Todo's

- Описать в документации процесс разворачивания проекта
- Ограничить список возвращаемых полей с информацией о точке